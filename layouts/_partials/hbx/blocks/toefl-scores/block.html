{{/* TOEFL Scores block (theme override) */}}
{{ $block := .block }}
{{ $page := .page }}

<div class="hbx-block toefl-scores">
  {{ with $block.content.title }}
    <h2 class="hbx-block-title">{{ . }}</h2>
  {{ end }}

  {{/* Get profile page (defaults to admin if not specified) */}}
  {{ $username := $block.content.username | default "admin" }}
  {{ $profile := site.GetPage (printf "/authors/%s" $username) }}

  {{ if $profile }}
    <div class="d-flex flex-wrap">
      {{ range $profile.Params.toefl_scores }}
        {{ $pct := div (mul .score 100) .max_score }}
        <div class="toefl-item">
          <div class="toefl-meter" style="--pct: {{ $pct }}%; --accent: var(--color-primary, #6366F1);">
            <span>{{ .score }}</span>
          </div>
          <div class="toefl-meta">
            <div class="toefl-name">{{ .name }}</div>
            <div class="toefl-value">{{ .score }}/{{ .max_score }}</div>
          </div>
        </div>
      {{ end }}
    </div>
  {{ else }}
    <p>No TOEFL scores found for user '{{ $username }}'.</p>
  {{ end }}
</div>